import { Request, WithRequired } from 'apollo-server-env';
import { GraphQLResolveInfo, DocumentNode, ExecutionArgs, GraphQLError } from 'graphql';
import { GraphQLExtension, EndHandler } from 'graphql-extensions';
import { Trace } from 'apollo-engine-reporting-protobuf';
import { EngineReportingOptions } from './agent';
import { GraphQLRequestContext } from 'apollo-server-core/dist/requestPipelineAPI';
export declare class EngineReportingExtension<TContext = any> implements GraphQLExtension<TContext> {
    trace: Trace;
    private nodes;
    private startHrTime;
    private operationName?;
    private queryString?;
    private documentAST?;
    private options;
    private addTrace;
    private generateClientInfo;
    constructor(options: EngineReportingOptions<TContext>, addTrace: (signature: string, operationName: string, trace: Trace) => void);
    requestDidStart(o: {
        request: Request;
        queryString?: string;
        parsedQuery?: DocumentNode;
        variables?: Record<string, any>;
        context: TContext;
        extensions?: Record<string, any>;
        requestContext: WithRequired<GraphQLRequestContext<TContext>, 'metrics'>;
    }): EndHandler;
    executionDidStart(o: {
        executionArgs: ExecutionArgs;
    }): void;
    willResolveField(_source: any, _args: {
        [argName: string]: any;
    }, _context: TContext, info: GraphQLResolveInfo): ((error: Error | null, result: any) => void) | void;
    didEncounterErrors(errors: GraphQLError[]): void;
    private rewriteError;
    private addError;
    private newNode;
    private ensureParentNode;
}
//# sourceMappingURL=extension.d.ts.map